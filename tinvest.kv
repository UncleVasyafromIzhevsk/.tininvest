# Карточка инструмента
<CardTools>
    name: 'cartaInstrument'
    id: carta_instrument
    uid: root.uid
    figi: root.figi
    ticker: root.ticker
    class_code: root.class_code
    isin: root.isin
    lot: root.lot
    currency: root.currency
    name_sh: root.name_sh
    exchange: root.exchange
    country_of_risk_name: root.country_of_risk_name
    sector: root.sector
    buy_available_flag: root.buy_available_flag
    sell_available_flag: root.sell_available_flag
    api_trade_available_flag: root.api_trade_available_flag
    for_qual_investor_flag: root.for_qual_investor_flag
    real_exchange: root.real_exchange
    price: root.price
    percent: root.percent
    percent_color: root.percent_color
    price_lot: root.price_lot

    md_bg_color: '#2F4F4F'
    size_hint_y: None
    height: 80
    MDBoxLayout:
        adaptive_height: True
        orientation: 'horizontal'
        MDLabel:
            text: carta_instrument.name_sh
            halign: 'center'
#        MDLabel:
#            text: carta_instrument.price
#            halign: 'center'
#        MDLabel:
#            text: carta_instrument.lot_str
#            halign: 'center'
        MDLabel:
            text: carta_instrument.price_lot
            halign: 'center'
        MDLabel:
            text: carta_instrument.percent
            color: carta_instrument.percent_color
            halign: 'center'
        MDIconButton:
            icon: 'information'
            halign: 'center'
            on_press:
                app.root.current = 'screen_info_tools'
                app.japan_candle(carta_instrument.name_sh, carta_instrument.uid, carta_instrument.figi, carta_instrument.isin)
                app.dialogue_share_promotion()



# главный экран приложения
<MainWindow>:
    MDBottomNavigation:
        panel_color: "#2F4F4F"
        selected_color_background: "orange"
        text_color_active: "green"

        # Экран портфеля
        MDBottomNavigationItem:
            name: 'home'
            text: 'Портфель'
            icon: 'toolbox'
            MDBoxLayout:
                md_bg_color: '#008000'
                adaptive_height: False
                orientation: 'vertical'
                padding: [5, 5, 5, 5]

                # Карта портфеля настройки
                MDCard:
                    size_hint: 1, .3
                    md_bg_color: '#2F4F4F'
                    MDBoxLayout:
                        adaptive_height: False
                        orientation: 'vertical'
                        MDLabel:
                            size_hint: 1, .2
                            font_style: 'H5'
                            halign: 'center'
                            text: "ПОРТФЕЛЬ"
                        MDSeparator:
                            height: '1dp'
                        MDGridLayout:
                            size_hint: 1, .7
                            adaptive_height: False
                            cols: 2
                            rows: 2
                            MDLabel:
                                text: 'Общая стоимость портфеля'
                            MDLabel:
                                id: tot_portf_val
                                text: '-'
                            MDLabel:
                                text: 'Общая стоимость валют в портфеле'
                            MDLabel:
                                id: tot_val_curr_portf
                                text: '-'

                # Экран портфеля акции
                MDScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    GridLayout:
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        id: inNali_box
                        spacing: 5
                        padding: [0, 5, 0, 0]




        # Экран брендов
        MDBottomNavigationItem:
            name: 'brands'
            text: 'АКЦИИ'
            icon: 'finance'
            MDBoxLayout:
                md_bg_color: '#008000'
                adaptive_height: False
                orientation: 'vertical'
                padding: [5, 5, 5, 5]

                MDCard:
                    size_hint: 1, .1
                    md_bg_color: '#2F4F4F'
                    MDAnchorLayout:
                        MDLabel:
                            font_style: 'H5'
                            text: "Акции доступные к купле-продаже"
                            halign: 'center'


                MDScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    GridLayout:
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        id: shares_box
                        spacing: 5
                        padding: [0, 5, 0, 0]


        # Экран избраного
        MDBottomNavigationItem:
            name: 'favourites'
            text: 'Избранное'
            icon: 'star-box'
            MDBoxLayout:
                md_bg_color: '#008000'
                adaptive_height: False
                orientation: 'vertical'
                padding: [5, 5, 5, 5]
                spacing: 5
                MDCard:
                    size_hint: 1, .5
                    md_bg_color: '#2F4F4F'
                    MDBoxLayout:
                        adaptive_height: False
                        orientation: 'vertical'
                        padding: [2, 2, 2, 2]
                        spacing: 2
                        MDCard:
                            md_bg_color: '#f30f22'
                            MDLabel:
                                id: promoShare1
                                text: 'Здесь будет название акции'
                                size_hint: 0.8, 1
                                halign: 'center'
                            MDIconButton:
                                icon: "delete-circle-outline"
                                size_hint: 0.2, 1
                                halign: 'center'
                                on_press: app.removing_share_favorites('favorites1')
                        MDCard:
                            md_bg_color: '#0544f3'
                            MDLabel:
                                id: promoShare2
                                text: 'Здесь будет название акции'
                                size_hint: 0.8, 1
                                halign: 'center'
                            MDIconButton:
                                icon: "delete-circle-outline"
                                size_hint: 0.2, 1
                                halign: 'center'
                                on_press: app.removing_share_favorites('favorites2')
                        MDCard:
                            md_bg_color: '#e9f322'
                            MDLabel:
                                id: promoShare3
                                text: 'Здесь будет название акции'
                                size_hint: 0.8, 1
                                halign: 'center'
                            MDIconButton:
                                icon: "delete-circle-outline"
                                size_hint: 0.2, 1
                                halign: 'center'
                                on_press: app.removing_share_favorites('favorites3')
                        MDCard:
                            md_bg_color: '#24f33d'
                            MDLabel:
                                id: promoShare4
                                text: 'Здесь будет название акции'
                                size_hint: 0.8, 1
                                halign: 'center'
                            MDIconButton:
                                icon: "delete-circle-outline"
                                size_hint: 0.2, 1
                                halign: 'center'
                                on_press: app.removing_share_favorites('favorites4')
                        MDCard:
                            md_bg_color: '#a38112'
                            MDLabel:
                                id: promoShare5
                                text: 'Здесь будет название акции'
                                size_hint: 0.8, 1
                                halign: 'center'
                            MDIconButton:
                                icon: "delete-circle-outline"
                                size_hint: 0.2, 1
                                halign: 'center'
                                on_press: app.removing_share_favorites('favorites5')


                MDCard:
                    name: 'graf_fav'
                    id: plot_line
                    size_hint: 1, .8
                    md_bg_color: '#2F4F4F'




# второй экран приложения
<ScreenInfoTools>:
    MDBoxLayout:
        id: screen_IT
        adaptive_height: False
        orientation: 'vertical'
        md_bg_color: '#008000'
        padding: [5, 5, 5, 5]
        spacing: 5
        MDCard:
            size_hint: 1, .1
            md_bg_color: '#2F4F4F'
            MDLabel:
                id: share_name
                text: 'Название акции'
                halign: "center"
        MDCard:
            size_hint: 1, .1
            md_bg_color: '#2F4F4F'
            MDAnchorLayout:
                MDSlider:
                    id: add_lot
                    min: 0
                    max: 0
                    step: 1
                    value: 0
        MDCard:
            size_hint: 1, .3
            md_bg_color: '#2F4F4F'
            MDBoxLayout:
                adaptive_height: False
                orientation: 'horizontal'
                MDLabel:
                    id: share_description
                    text: 'Описание:' + '\n' + 'Здесь будет описание бренда'
                    halign: "left"
                MDLabel:
                    text: "Лотов к покупке: " + str(int(add_lot.value))
                    halign: "center"
        MDCard:
            size_hint: 1, .1
            md_bg_color: '#2F4F4F'
            MDBoxLayout:
                adaptive_height: False
                orientation: 'horizontal'
                MDAnchorLayout:
                    MDIconButton:
                        icon: "arrow-left-circle"
                        halign: "center"
                        on_release:
                            app.root.current = 'main'
                            root.manager.transition.direction = 'right'
                MDAnchorLayout:
                    MDIconButton:
                        icon: "cash-multiple"
                        halign: "center"
                        on_press: app.buying_shares(int(add_lot.value))
                MDAnchorLayout:
                    MDIconButton:
                        icon: "plus-box"
                        halign: "center"
                        on_press:
                            app.root.current = 'main'
                            root.manager.transition.direction = 'right'
                            app.line_graph()
        MDCard:
            name: 'graf_sh'
            id: jap_cand_plot
            md_bg_color: '#2F4F4F'
            size_hint: 1, .9


# Экран входа и ввода токена
<Authorization_Screen>:
    MDBoxLayout:
        adaptive_height: False
        orientation: 'vertical'
        md_bg_color: '#008000'
        padding: [5, 5, 5, 5]
        spacing: 5
        MDCard:
            size_hint: 1, .1
            md_bg_color: '#2F4F4F'
            MDLabel:
                text: 'Добро пожаловать в TINVEST'
                halign: "center"
        MDCard:
            size_hint: 1, .2
            md_bg_color: '#2F4F4F'
            MDBoxLayout:
                orientation: 'horizontal'
                MDTextField:
                    id: token_text
                    multiline: True
                    hint_text: 'Введите токкен'
                    max_text_length: 88
                    pos_hint: {'top': 0.9}
                    hint_text_color_focus: "green"
                    line_color_focus: "green"
                MDIconButton:
                    id: approve
                    icon: "check-outline"
                    pos_hint: {'top': 0.7}
                    on_press: app.token_input(token_text.text)
        MDCard:
            size_hint: 1, .8
            md_bg_color: '#2F4F4F'
            MDLabel:
                id: tinuserinfo
                text: 'Здесь будет информация аккаунта'
                halign: "center"
        MDCard:
            size_hint: 1, .1
            md_bg_color: '#2F4F4F'
            MDAnchorLayout:
                MDTextButton:
                    id: go_next
                    text: 'Продолжить'
                    disabled:  True
                    on_release:
                        app.root.current = 'main'
                        root.manager.transition.direction = 'left'
                        app.portfolio_data()
                        app.go_main()










